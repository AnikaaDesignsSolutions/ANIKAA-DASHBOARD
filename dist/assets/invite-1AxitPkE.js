import{j as r,w as _,W as b,r as m,cP as k,u as C,B as j,L as N}from"./index-JPne9CEF.js";import{a as L,M as z}from"./index.esm-duCv3Qe7.js";import{d as M}from"./index.modern-CpgaMXyi.js";import{L as S,S as y}from"./login-layout-BzR57Q1T.js";import{S as F}from"./index-B7WhEIZx.js";import{u as E}from"./use-notification-BHuC7VdR.js";import{g as I}from"./error-messages-DhbYeD1Z.js";import"./index-qr1gExzI.js";import"./index-CGO0cPyz.js";function T(s){var e={target:"confetti-holder",max:80,size:1,animate:!0,respawn:!0,props:["circle","square","triangle","line"],colors:[[165,104,246],[230,61,135],[0,199,228],[253,214,126]],clock:25,interval:null,rotate:!1,start_from_edge:!1,width:window.innerWidth,height:window.innerHeight};if(s&&(s.target&&(e.target=s.target),s.max&&(e.max=s.max),s.size&&(e.size=s.size),s.animate!==void 0&&s.animate!==null&&(e.animate=s.animate),s.respawn!==void 0&&s.respawn!==null&&(e.respawn=s.respawn),s.props&&(e.props=s.props),s.colors&&(e.colors=s.colors),s.clock&&(e.clock=s.clock),s.start_from_edge!==void 0&&s.start_from_edge!==null&&(e.start_from_edge=s.start_from_edge),s.width&&(e.width=s.width),s.height&&(e.height=s.height),s.rotate!==void 0&&s.rotate!==null&&(e.rotate=s.rotate)),typeof e.target!="object"&&typeof e.target!="string")throw new TypeError("The target parameter should be a node or string");if(typeof e.target=="object"&&(e.target===null||!e.target instanceof HTMLCanvasElement)||typeof e.target=="string"&&(document.getElementById(e.target)===null||!document.getElementById(e.target)instanceof HTMLCanvasElement))throw new ReferenceError("The target element does not exist or is not a canvas element");var l=typeof e.target=="object"?e.target:document.getElementById(e.target),a=l.getContext("2d"),c=[];function d(t,i){t||(t=1);var u=Math.random()*t;return i?Math.floor(u):u}var x=e.props.reduce(function(t,i){return t+(i.weight||1)},0);function v(){for(var t=Math.random()*x,i=0;i<e.props.length;++i){var u=e.props[i].weight||1;if(t<u)return i;t-=u}}function w(){var t=e.props[v()],i={prop:t.type?t.type:t,x:d(e.width),y:e.start_from_edge?e.clock>=0?-10:parseFloat(e.height)+10:d(e.height),src:t.src,radius:d(4)+1,size:t.size,rotate:e.rotate,line:Math.floor(d(65)-30),angles:[d(10,!0)+2,d(10,!0)+2,d(10,!0)+2,d(10,!0)+2],color:e.colors[d(e.colors.length,!0)],rotation:d(360,!0)*Math.PI/180,speed:d(e.clock/7)+e.clock/30};return i}function g(t){if(t){var i=t.radius<=3?.4:.8;switch(a.fillStyle=a.strokeStyle="rgba("+t.color+", "+i+")",a.beginPath(),t.prop){case"circle":{a.moveTo(t.x,t.y),a.arc(t.x,t.y,t.radius*e.size,0,Math.PI*2,!0),a.fill();break}case"triangle":{a.moveTo(t.x,t.y),a.lineTo(t.x+t.angles[0]*e.size,t.y+t.angles[1]*e.size),a.lineTo(t.x+t.angles[2]*e.size,t.y+t.angles[3]*e.size),a.closePath(),a.fill();break}case"line":{a.moveTo(t.x,t.y),a.lineTo(t.x+t.line*e.size,t.y+t.radius*5),a.lineWidth=2*e.size,a.stroke();break}case"square":{a.save(),a.translate(t.x+15,t.y+5),a.rotate(t.rotation),a.fillRect(-15*e.size,-5*e.size,15*e.size,5*e.size),a.restore();break}case"svg":{a.save();var u=new window.Image;u.src=t.src;var o=t.size||15;a.translate(t.x+o/2,t.y+o/2),t.rotate&&a.rotate(t.rotation),a.drawImage(u,-(o/2)*e.size,-(o/2)*e.size,o*e.size,o*e.size),a.restore();break}}}}var p=function(){e.animate=!1,clearInterval(e.interval),requestAnimationFrame(function(){a.clearRect(0,0,l.width,l.height);var t=l.width;l.width=1,l.width=t})},f=function(){l.width=e.width,l.height=e.height,c=[];for(var t=0;t<e.max;t++)c.push(w());function i(){a.clearRect(0,0,e.width,e.height);for(var o in c)g(c[o]);u(),e.animate&&requestAnimationFrame(i)}function u(){for(var o=0;o<e.max;o++){var n=c[o];n&&(e.animate&&(n.y+=n.speed),n.rotate&&(n.rotation+=n.speed/35),(n.speed>=0&&n.y>e.height||n.speed<0&&n.y<0)&&(e.respawn?(c[o]=n,c[o].x=d(e.width,!0),c[o].y=n.speed>=0?-10:parseFloat(e.height)):c[o]=void 0))}c.every(function(h){return h===void 0})&&p()}return requestAnimationFrame(i)};return{render:f,clear:p}}const q=({size:s="24",color:e="currentColor",...l})=>{const a=+s*2;return r.jsxs("svg",{width:a,height:s,viewBox:"0 0 40 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...l,children:[r.jsx("path",{d:"M4 9H36",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M31 5L36 9L31 13",stroke:e,strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})},P=({size:s="96",color:e="currentColor",...l})=>r.jsxs("svg",{width:s,height:s,viewBox:"0 0 96 96",fill:"none",xmlns:"http://www.w3.org/2000/svg",...l,children:[r.jsx("path",{d:"M75.6103 20.9859L57.5892 10.5638C51.6929 7.14539 44.4678 7.14539 38.5715 10.5638L20.4673 20.9859C14.6541 24.4044 11 30.741 11 37.4945V58.4221C11 65.259 14.6541 71.5122 20.4673 74.9307L38.4884 85.4362C44.3848 88.8546 51.6098 88.8546 57.5061 85.4362L75.5273 74.9307C81.4236 71.5122 84.9946 65.259 84.9946 58.4221V37.4945C85.1607 30.741 81.5066 24.4044 75.6103 20.9859ZM48.0388 66.593C37.8241 66.593 29.5194 58.2553 29.5194 48C29.5194 37.7447 37.8241 29.407 48.0388 29.407C58.2535 29.407 66.6413 37.7447 66.6413 48C66.6413 58.2553 58.3366 66.593 48.0388 66.593Z",fill:"url(#paint0_linear_2823_15237)"}),r.jsx("defs",{children:r.jsxs("linearGradient",{id:"paint0_linear_2823_15237",x1:"11",y1:"88",x2:"100.328",y2:"63.1913",gradientUnits:"userSpaceOnUse",children:[r.jsx("stop",{stopColor:"#7C53FF"}),r.jsx("stop",{offset:"1",stopColor:"#F796FF"})]})})]}),O=()=>{const s=_(),e=b.parse(s.search.substring(1)),[l,a]=m.useState(!1);let c=null;if(e!=null&&e.token)try{c=M(e.token)}catch{c=null}const[d,x]=m.useState(!1),[v,w]=m.useState(!1);m.useEffect(()=>{const n={target:"confetti-canvas",start_from_edge:!0,size:3,clock:25,colors:[[251,146,60],[167,139,250],[251,146,60],[96,165,250],[45,212,191],[250,204,21],[232,121,249]],max:26},h=new T(n);return h.render(),()=>h.clear()},[]);const{register:g,handleSubmit:p,formState:f}=L({defaultValues:{first_name:"",last_name:"",password:"",repeat_password:""}}),t=k(),i=C(),u=E(),o=n=>{if(x(!1),n.password!==n.repeat_password){x(!0);return}t.mutate({token:e.token,user:{first_name:n.first_name,last_name:n.last_name,password:n.password}},{onSuccess:()=>{i("/login")},onError:h=>{u("Error",I(h),"error")}})};return m.useEffect(()=>{f.dirtyFields.password&&f.dirtyFields.repeat_password&&f.dirtyFields.first_name&&f.dirtyFields.last_name?w(!0):w(!1)},[f]),r.jsx(r.Fragment,{children:l?r.jsxs(S,{children:[r.jsx(F,{title:"Create Account"}),r.jsx("div",{className:"flex h-full w-full items-center justify-center",children:r.jsx("div",{className:"flex min-h-[600px] bg-grey-0 rounded-rounded justify-center",children:r.jsxs("form",{className:"flex flex-col py-12 w-full px-[120px] items-center",onSubmit:p(o),children:[r.jsx(z,{}),c?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"inter-2xlarge-semibold mt-4 text-grey-90",children:"Welcome to the team!"}),r.jsx("span",{className:"inter-base-regular text-grey-50 mt-2 mb-large",children:"Create your account belowðŸ‘‡ðŸ¼"}),r.jsx(y,{placeholder:"First name",...g("first_name",{required:!0}),autoComplete:"given-name"}),r.jsx(y,{placeholder:"Last name",...g("last_name",{required:!0}),autoComplete:"family-name"}),r.jsx(y,{placeholder:"Password",type:"password",...g("password",{required:!0}),autoComplete:"new-password"}),r.jsx(y,{placeholder:"Repeat password",type:"password",...g("repeat_password",{required:!0}),autoComplete:"new-password"}),d&&r.jsx("span",{className:"text-rose-50 w-full mt-2 inter-small-regular",children:"The two passwords are not the same"}),r.jsx(j,{variant:"primary",size:"large",type:"submit",className:"w-full mt-base",loading:f.isSubmitting,disabled:!v,children:"Create account"}),r.jsx(N,{to:"/login",className:"inter-small-regular text-grey-50 mt-large",children:"Already signed up? Log in"})]}):r.jsxs("div",{className:"h-full flex flex-col gap-y-2 text-center items-center justify-center",children:[r.jsx("span",{className:"inter-large-semibold text-grey-90",children:"You signup link is invalid"}),r.jsx("span",{className:"inter-base-regular mt-2 text-grey-50",children:"Contact your administrator to obtain a valid signup link"})]})]})})})]}):r.jsxs("div",{className:"bg-grey-90 h-screen w-full overflow-hidden",children:[r.jsxs("div",{className:"z-10 flex-grow flex flex-col items-center justify-center h-full absolute inset-0 max-w-[1080px] mx-auto",children:[r.jsx(P,{className:"mb-3xlarge"}),r.jsxs("div",{className:"flex flex-col items-center max-w-3xl text-center",children:[r.jsx("h1",{className:"inter-3xlarge-semibold text-grey-0 mb-base",children:"You have been invited to join the team"}),r.jsx("p",{className:"inter-xlarge-regular text-grey-50",children:"You can now join the Medusa Store team. Sign up below and get started with your Medusa Admin account right away."})]}),r.jsx("div",{className:"mt-4xlarge",children:r.jsxs(j,{size:"large",variant:"primary",className:"w-[280px]",onClick:()=>a(!0),children:["Sign up",r.jsx(q,{size:20,className:"pt-1"})]})})]}),r.jsx("canvas",{id:"confetti-canvas"})]})})};export{O as default};
